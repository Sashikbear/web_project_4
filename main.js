!function(){"use strict";class e{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_resetForm(){this._inputList.forEach((e=>{this._hideInputError(e)}))}resetValidation(){this._toggleButtonState(),this._resetForm()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class s{constructor(e,s){let{data:n,handleCardClick:r}=e;t(this,"_handleDeleteButton",(()=>{this._element.remove(),this._element=null})),t(this,"_handleLikeButton",(()=>{this._likeButton.classList.toggle("button_active")})),this._name=n.name,this._link=n.link,this._cardSelector=s,this._handleCardClick=r,this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".button_type_like"),this._deleteButton=this._element.querySelector(".button_type_delete"),this._cardImage=this._element.querySelector(".card__image"),this._cardImageTitle=this._element.querySelector(".card__title")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._deleteButton.addEventListener("click",this._handleDeleteButton),this._likeButton.addEventListener("click",this._handleLikeButton),this._cardImage.addEventListener("click",(()=>this._handleCardClick({name:this._name,src:this._link})))}generateCard(){return this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._link,this._cardImageTitle.textContent=this._name,this._element}}const n=document.querySelector(".popup__input_type_name"),r=document.querySelector(".popup__input_type_job"),o=document.querySelector(".button_type_edit"),i=document.querySelector(".button_type_add"),l=[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}].reverse();class a{constructor(e){var t,s;s=e=>{"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup_opened")||e.target.classList.contains("button_type_close"))&&this.close()}))}}var u=class extends a{constructor(e,t){super(e),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".popup__form"),this._inputs=Array.from(this._popupForm.querySelectorAll(".popup__input"))}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}close(){super.close(),this._popupForm.reset()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(()=>this._handleFormSubmit(this._getInputValues())))}};const c={};var _;_={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(_.formSelector)).forEach((t=>{const s=new e(_,t),n=t.getAttribute("name");c[n]=s,s.enableValidation()}));const p=new class{constructor(e){let{userNameSelector:t,userJobSelector:s}=e;this._userNameSelector=t,this._userJobSelector=s,this._userNameElement=document.querySelector(t),this._userJobElement=document.querySelector(s)}getUserInfo(){return{name:this._userNameElement.textContent,job:this._userJobElement.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._userNameElement.textContent=t,this._userJobElement.textContent=s}}({userNameSelector:".profile__user-name",userJobSelector:".profile__user-job"}),d=new u(".popup_type_profile",(function(e){p.setUserInfo(e),d.close()})),m=new u(".popup_type_add-card",(function(e){let{name:t,url:s}=e;const n={name:t,link:s};E.addItem(n),m.close()})),h=new class extends a{constructor(e){super(e),this._imageZoom=this._popupElement.querySelector(".popup__image"),this._imageZoomTitle=this._popupElement.querySelector(".popup__title")}open(e){let{link:t,name:s}=e;super.open(),this._imageZoom.src=t,this._imageZoom.alt="Image of ".concat(s),this._imageZoomTitle.textContent=s}}(".popup_type_zoom-card");d.setEventListeners(),m.setEventListeners(),h.setEventListeners(),o.addEventListener("click",(function(){d.open();const{name:e,job:t}=p.getUserInfo();n.value=e,r.value=t,c["form-profile"].resetValidation()}));const E=new class{constructor(e,t){let{items:s,renderer:n}=e;this._renderedItems=s,this._renderer=n,this._container=document.querySelector(t)}addItem(e){const t=this._renderer(e);this._container.prepend(t)}renderItems(){this._renderedItems.forEach((e=>{this.addItem(e)}))}}({items:l,renderer:e=>new s({data:e,handleCardClick:()=>{h.open({link:e.link,name:e.name})}},"#card").generateCard()},".cards__card-grid");E.renderItems(),i.addEventListener("click",(function(){m.open(),c["form-add-card"].resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WixFQUFXakMsaUJBQWlCLFNBUjVCLFdBQ0V3RSxFQUFhOUIsT0FDYixNQUFNLEtBQUU1QixFQUFGLElBQVF3RCxHQUFRUixFQUFTTyxjQUMvQnRDLEVBQVV5QixNQUFRMUMsRUFDbEJrQixFQUFTd0IsTUFBUWMsRUFDakJaLEVBQWUsZ0JBQWdCeEQscUJBT2pDLE1BQU0yRSxFQUFXLElFMUVGLE1BQ2J2SCxZQUFZLEVBQXFCNEgsR0FBbUIsSUFBeEMsTUFBRUMsRUFBRixTQUFTQyxHQUErQixFQUNsRDNILEtBQUs0SCxlQUFpQkYsRUFDdEIxSCxLQUFLNkgsVUFBWUYsRUFDakIzSCxLQUFLOEgsV0FBYWhFLFNBQVMzQyxjQUFjc0csR0FHM0NKLFFBQVFVLEdBQ04sTUFBTUMsRUFBT2hJLEtBQUs2SCxVQUFVRSxHQUM1Qi9ILEtBQUs4SCxXQUFXRyxRQUFRRCxHQUcxQkUsY0FDRWxJLEtBQUs0SCxlQUFldEYsU0FBU3lGLElBQzNCL0gsS0FBS3FILFFBQVFVLFFGNkRqQixDQUNFTCxNQUFPaEQsRUFDUGlELFNBQVc1RSxHQUNULElBQUlGLEVBQ0YsQ0FDRUUsS0FBQUEsRUFDQUMsZ0JBQWlCLEtBQ2ZzRSxFQUFXckMsS0FBSyxDQUFFMUIsS0FBTVIsRUFBS1EsS0FBTUYsS0FBTU4sRUFBS00sU0FHbEQsU0FDQWUsZ0JBRU4scUJBR0ZnRCxFQUFTYyxjQWdCVHpELEVBQVVsQyxpQkFBaUIsU0FKM0IsV0FDRTJFLEVBQWFqQyxPQUNiZ0IsRUFBZSxpQkFBaUJ4RCxxQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9XG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBfcmVzZXRGb3JtKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9yZXNldEZvcm0oKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9saWtlXCIpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9kZWxldGVcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZVRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24pO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24pO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIHNyYzogdGhpcy5fbGluayB9KVxuICAgICk7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH07XG5cbiAgX2hhbmRsZUxpa2VCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfTtcblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIik7XG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX2pvYlwiKTtcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfYWRkXCIpO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcbiAgfSxcbl0ucmV2ZXJzZSgpO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImJ1dHRvbl90eXBlX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2Vab29tID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2ltYWdlWm9vbVRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3RpdGxlXCIpO1xuICB9XG5cbiAgb3Blbih7IGxpbmssIG5hbWUgfSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9pbWFnZVpvb20uc3JjID0gbGluaztcbiAgICB0aGlzLl9pbWFnZVpvb20uYWx0ID0gYEltYWdlIG9mICR7bmFtZX1gO1xuICAgIHRoaXMuX2ltYWdlWm9vbVRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpXG4gICAgKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PlxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxuICAgICk7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7XG4gIG5hbWVJbnB1dCxcbiAgam9iSW5wdXQsXG4gIGVkaXRCdXR0b24sXG4gIGFkZEJ1dHRvbixcbiAgaW5pdGlhbENhcmRzLFxuICBjb25maWcsXG59IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGZvcm0gdmFsaWRhdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcblxuLyogLS0tLS0tLS0tLS0tLSBuZXcgY2xhc3NlcycgaW5zdGFuY2VzIHdpdGggbmVjZXNzYXJ5IHNlbGVjdG9ycyAtLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX191c2VyLW5hbWVcIixcbiAgdXNlckpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX191c2VyLWpvYlwiLFxufSk7XG5cbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIixcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcbik7XG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIucG9wdXBfdHlwZV9hZGQtY2FyZFwiLFxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxuKTtcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV96b29tLWNhcmRcIik7XG5cbi8qIC0tIGVuYWJsZSBpbmhlcml0ZWQgZXZlbnRsaXN0ZW5lcnMgb24gaW5zdGFuY2VzIGZyb20gcGFyZW50IFBvcHVwIGNsYXNzIC0tICovXG5cbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBlZGl0aW5nIHRoZSBwcm9maWxlIGJsb2NrIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KHVzZXJEYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRCdXR0b24oKSB7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICBqb2JJbnB1dC52YWx1ZSA9IGpvYjtcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtLXByb2ZpbGVcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG59XG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUVkaXRCdXR0b24pO1xuXG4vKiAtLS0tLS0gdXNpbmcgbmV3IGluc3RhbmNlIG9mIFNlY3Rpb24gY2xhc3MgdG8gZGlzcGxheSBpbml0aWFsIGNhcmRzIC0tLS0tLSAqL1xuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGRhdGEpID0+XG4gICAgICBuZXcgQ2FyZChcbiAgICAgICAge1xuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICBpbWFnZVBvcHVwLm9wZW4oeyBsaW5rOiBkYXRhLmxpbmssIG5hbWU6IGRhdGEubmFtZSB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBcIiNjYXJkXCJcbiAgICAgICkuZ2VuZXJhdGVDYXJkKCksXG4gIH0sXG4gIFwiLmNhcmRzX19jYXJkLWdyaWRcIlxuKTtcblxuY2FyZExpc3QucmVuZGVySXRlbXMoKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGFkZGluZyBuZXcgY2FyZCBibG9jayAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCh7IG5hbWUsIHVybCB9KSB7XG4gIGNvbnN0IGRhdGEgPSB7XG4gICAgbmFtZTogbmFtZSxcbiAgICBsaW5rOiB1cmwsXG4gIH07XG4gIGNhcmRMaXN0LmFkZEl0ZW0oZGF0YSk7XG4gIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xufVxuZnVuY3Rpb24gaGFuZGxlQWRkQnV0dG9uKCkge1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xuICBmb3JtVmFsaWRhdG9yc1tcImZvcm0tYWRkLWNhcmRcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG59XG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUFkZEJ1dHRvbik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZVNlbGVjdG9yID0gdXNlck5hbWVTZWxlY3RvcjtcbiAgICB0aGlzLl91c2VySm9iU2VsZWN0b3IgPSB1c2VySm9iU2VsZWN0b3I7XG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VySm9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYlNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuX3VzZXJKb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl91c2VySm9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYjtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICBjb25zdCBjYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoY2FyZCk7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuYWRkSXRlbShpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiX3Jlc2V0Rm9ybSIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2VsZW1lbnQiLCJfbGlrZUJ1dHRvbiIsInRvZ2dsZSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2dldFRlbXBsYXRlIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJfY2FyZEltYWdlVGl0bGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJzcmMiLCJnZW5lcmF0ZUNhcmQiLCJhbHQiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJpbml0aWFsQ2FyZHMiLCJyZXZlcnNlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX2lucHV0cyIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwiZm9ybVZhbGlkYXRvcnMiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsInVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsIl91c2VyTmFtZVNlbGVjdG9yIiwiX3VzZXJKb2JTZWxlY3RvciIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckpvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwicHJvZmlsZVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsInVzZXJEYXRhIiwiYWRkQ2FyZFBvcHVwIiwidXJsIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwiaW1hZ2VQb3B1cCIsIl9pbWFnZVpvb20iLCJfaW1hZ2Vab29tVGl0bGUiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiY2FyZCIsInByZXBlbmQiLCJyZW5kZXJJdGVtcyJdLCJzb3VyY2VSb290IjoiIn0=